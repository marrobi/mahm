{% extends 'layout.html' %}

{% set pageName = "Book blood test" %}

{% block beforeContent %}
  {{ backLink({
    text: "Back",
    href: "/blood-test/locations"
  }) }}
{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      <h1 class="nhsuk-heading-xl">
        Book your U&E blood test
      </h1>

      <div class="nhsuk-summary-card">
        <div class="nhsuk-summary-card__header">
          <h2 class="nhsuk-summary-card__title">
            Selected location
          </h2>
        </div>
        <div class="nhsuk-summary-card__body">
          <p><strong>Westfield Hospital Pathology Lab</strong><br>
          Westfield Hospital, Oak Avenue, W12 7NH<br>
          0.8 miles away</p>
        </div>
      </div>

      <form method="post">
        <div class="nhsuk-form-group">
          <fieldset class="nhsuk-fieldset">
            <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--m">
              <h2 class="nhsuk-fieldset__heading">
                Choose your preferred date
              </h2>
            </legend>
            
            <div class="nhsuk-radios">
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="date-1" name="appointment-date" type="radio" value="tomorrow">
                <label class="nhsuk-radios__label" for="date-1">
                  <strong>Tomorrow, Friday 11 October</strong><br>
                  <span class="nhsuk-u-secondary-text-colour">Available: 8:30am, 10:45am, 2:30pm, 3:45pm</span>
                </label>
              </div>
              
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="date-2" name="appointment-date" type="radio" value="monday">
                <label class="nhsuk-radios__label" for="date-2">
                  <strong>Monday 14 October</strong><br>
                  <span class="nhsuk-u-secondary-text-colour">Available: 7:30am, 9:15am, 11:30am, 1:45pm, 3:15pm</span>
                </label>
              </div>
              
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="date-3" name="appointment-date" type="radio" value="tuesday">
                <label class="nhsuk-radios__label" for="date-3">
                  <strong>Tuesday 15 October</strong><br>
                  <span class="nhsuk-u-secondary-text-colour">Available: 8:00am, 10:30am, 12:15pm, 2:45pm</span>
                </label>
              </div>
              
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="date-4" name="appointment-date" type="radio" value="saturday">
                <label class="nhsuk-radios__label" for="date-4">
                  <strong>Saturday 19 October</strong><br>
                  <span class="nhsuk-u-secondary-text-colour">Available: 8:00am, 9:30am, 11:00am (Weekend service)</span>
                </label>
              </div>
            </div>
          </fieldset>
        </div>

        <div class="nhsuk-form-group" id="time-slots" style="display: none;">
          <fieldset class="nhsuk-fieldset">
            <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--s">
              <h3 class="nhsuk-fieldset__heading">
                Choose your time
              </h3>
            </legend>
            
            <div class="nhsuk-radios nhsuk-radios--small">
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="time-1" name="appointment-time" type="radio" value="08:30">
                <label class="nhsuk-radios__label" for="time-1">8:30am</label>
              </div>
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="time-2" name="appointment-time" type="radio" value="10:45">
                <label class="nhsuk-radios__label" for="time-2">10:45am</label>
              </div>
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="time-3" name="appointment-time" type="radio" value="14:30">
                <label class="nhsuk-radios__label" for="time-3">2:30pm</label>
              </div>
              <div class="nhsuk-radios__item">
                <input class="nhsuk-radios__input" id="time-4" name="appointment-time" type="radio" value="15:45">
                <label class="nhsuk-radios__label" for="time-4">3:45pm</label>
              </div>
            </div>
          </fieldset>
        </div>

        <div class="nhsuk-form-group">
          <h3 class="nhsuk-heading-s">Contact details</h3>
          
          <label class="nhsuk-label" for="contact-number">
            Mobile phone number
          </label>
          <div class="nhsuk-hint" id="contact-number-hint">
            For appointment reminders and results notification
          </div>
          <input class="nhsuk-input nhsuk-input--width-20" id="contact-number" name="contact-number" type="tel" aria-describedby="contact-number-hint" value="07700 900123">
          
          <br><br>
          
          <label class="nhsuk-label" for="email">
            Email address
          </label>
          <div class="nhsuk-hint" id="email-hint">
            For appointment confirmation and results (optional)
          </div>
          <input class="nhsuk-input nhsuk-input--width-20" id="email" name="email" type="email" aria-describedby="email-hint" value="patient@example.com">
        </div>

        <div class="nhsuk-checkboxes">
          <div class="nhsuk-checkboxes__item">
            <input class="nhsuk-checkboxes__input" id="reminders" name="reminders" type="checkbox" value="yes" checked>
            <label class="nhsuk-checkboxes__label" for="reminders">
              Send me SMS reminders
            </label>
          </div>
          <div class="nhsuk-checkboxes__item">
            <input class="nhsuk-checkboxes__input" id="results-sms" name="results-sms" type="checkbox" value="yes">
            <label class="nhsuk-checkboxes__label" for="results-sms">
              Text me when results are ready
            </label>
          </div>
        </div>

        <div class="nhsuk-inset-text">
          <span class="nhsuk-u-visually-hidden">Information: </span>
          <p><strong>What to bring:</strong> Photo ID and NHS number (if you have it)<br>
          <strong>Duration:</strong> 5-10 minutes<br>
          <strong>Fasting:</strong> Not required - eat normally</p>
        </div>

        <button class="nhsuk-button" type="submit">
          Book blood test appointment
        </button>
      </form>

    </div>
  </div>

  <script>
    // Show time slots when date is selected
    document.querySelectorAll('input[name="appointment-date"]').forEach(radio => {
      radio.addEventListener('change', function() {
        document.getElementById('time-slots').style.display = 'block';
      });
    });
  </script>
{% endblock %}