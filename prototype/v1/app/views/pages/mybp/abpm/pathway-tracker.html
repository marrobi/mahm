{% extends 'layout-app.html' %}

{% set hub = "Your health" %}
{% set pageHeading = "Diagnostic Pathway Tracker" %}

{% block beforeContent %}
  {{ backLink({
    text: "Back to ABPM Results",
    href: "/pages/mybp/abpm/results"
  }) }}
{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      <h1 class="nhsuk-heading-xl">
        Your diagnostic pathway
      </h1>

      <p class="nhsuk-lede-text">
        Track your progress from initial elevated readings through to diagnosis and treatment planning.
      </p>

      <div class="nhsuk-warning-callout">
        <h3 class="nhsuk-warning-callout__label">
          <span role="img" aria-label="Warning">⚠️</span>
          Demo pathway only
        </h3>
        <p>This shows a simulated diagnostic journey for demonstration purposes.</p>
      </div>

      <!-- Diagnostic Pathway Progress -->
      <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-full">
          
          <!-- Step 1: Elevated reading detected -->
          <div class="nhsuk-summary-card">
            <div class="nhsuk-summary-card__header">
              <h3 class="nhsuk-summary-card__title">
                {{ nhsappBadgeSmall({
                  text: "Complete",
                  colour: "green"
                }) }}
                Step 1: Elevated reading detected
              </h3>
              <p class="nhsuk-u-secondary-text-colour">15 September 2024 at 9:30am</p>
            </div>
            <div class="nhsuk-summary-card__body">
              <p>Blood pressure reading of 155/92 mmHg recorded during routine NHS Health Check at Westfield Community Pharmacy.</p>
            </div>
          </div>

          <!-- Step 2: Repeat measurements -->
          <div class="nhsuk-summary-card">
            <div class="nhsuk-summary-card__header">
              <h3 class="nhsuk-summary-card__title">
                {{ nhsappBadgeSmall({
                  text: "Complete",
                  colour: "green"
                }) }}
                Step 2: Repeat measurements arranged
              </h3>
              <p class="nhsuk-u-secondary-text-colour">18 September 2024 at 2:15pm</p>
            </div>
            <div class="nhsuk-summary-card__body">
              <p>Second and third readings scheduled to confirm elevated blood pressure. Readings: 158/95 and 152/89 mmHg.</p>
            </div>
          </div>

          <!-- Step 3: ABPM booked -->
          <div class="nhsuk-summary-card">
            <div class="nhsuk-summary-card__header">
              <h3 class="nhsuk-summary-card__title">
                {{ nhsappBadgeSmall({
                  text: "Complete",
                  colour: "green"
                }) }}
                Step 3: ABPM appointment booked
              </h3>
              <p class="nhsuk-u-secondary-text-colour">25 September 2024 at 11:00am</p>
            </div>
            <div class="nhsuk-summary-card__body">
              <p>Ambulatory blood pressure monitoring arranged at Boots pharmacy (Mill Road branch). Device fitted for 24-hour monitoring period.</p>
            </div>
          </div>

          <!-- Step 4: ABPM results -->
          <div class="nhsuk-summary-card">
            <div class="nhsuk-summary-card__header">
              <h3 class="nhsuk-summary-card__title">
                {{ nhsappBadgeSmall({
                  text: "Complete",
                  colour: "green"
                }) }}
                Step 4: ABPM results available
              </h3>
              <p class="nhsuk-u-secondary-text-colour">8 October 2024 at 4:20pm</p>
            </div>
            <div class="nhsuk-summary-card__body">
              <p>24-hour average: 148/86 mmHg. Daytime: 148/86 mmHg. Nighttime: 135/78 mmHg. Stage 1 hypertension confirmed.</p>
            </div>
          </div>

          <!-- Step 5: GP confirmation (current) -->
          <div class="nhsuk-summary-card nhsuk-summary-card--blue">
            <div class="nhsuk-summary-card__header">
              <h3 class="nhsuk-summary-card__title">
                {{ nhsappBadgeSmall({
                  text: "In progress",
                  colour: "yellow"
                }) }}
                Step 5: Awaiting GP confirmation
              </h3>
              <p class="nhsuk-u-secondary-text-colour">Clinical review in progress</p>
            </div>
            <div class="nhsuk-summary-card__body">
              <p><strong>Your results are being reviewed by Dr. Sarah Johnson</strong> at Westfield Medical Centre. You will be contacted within 2 working days.</p>
              <div class="nhsuk-inset-text">
                <span class="nhsuk-u-visually-hidden">Important: </span>
                <h4 class="nhsuk-heading-s">GP approval required</h4>
                <p>Per NICE guidelines, no patient can receive a new diagnosis of essential hypertension without GP approval. The evidence package has been compiled and sent for clinical review.</p>
              </div>
            </div>
          </div>

          <!-- Step 6: Treatment planning (pending) -->
          <div class="nhsuk-summary-card nhsuk-summary-card--grey">
            <div class="nhsuk-summary-card__header">
              <h3 class="nhsuk-summary-card__title">
                {{ nhsappBadgeSmall({
                  text: "Pending",
                  colour: "grey"
                }) }}
                Step 6: Treatment planning
              </h3>
              <p class="nhsuk-u-secondary-text-colour">To be scheduled</p>
            </div>
            <div class="nhsuk-summary-card__body">
              <p>Discussion of treatment options, lifestyle advice, and monitoring plan. Shared decision-making consultation to be scheduled.</p>
            </div>
          </div>

        </div>
      </div>

      <h2 class="nhsuk-heading-m">Current status</h2>

      <div class="nhsuk-summary-card">
        <div class="nhsuk-summary-card__header">
          <h3 class="nhsuk-summary-card__title">
            Stage 5 of 6: GP Review
          </h3>
        </div>
        <div class="nhsuk-summary-card__body">
          <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-one-half">
              {{ nhsappBadgeLarge({
                text: "Awaiting confirmation",
                colour: "yellow"
              }) }}
            </div>
            <div class="nhsuk-grid-column-one-half">
              <h4 class="nhsuk-heading-s">What happens next</h4>
              <p>Dr. Sarah Johnson is reviewing your ABPM results and will contact you to discuss treatment options.</p>
            </div>
          </div>
        </div>
      </div>

      <h2 class="nhsuk-heading-m">Timeline summary</h2>

      <div class="nhsuk-table-responsive">
        <table class="nhsuk-table">
          <thead class="nhsuk-table__head">
            <tr class="nhsuk-table__row">
              <th class="nhsuk-table__header" scope="col">Stage</th>
              <th class="nhsuk-table__header" scope="col">Date completed</th>
              <th class="nhsuk-table__header" scope="col">Status</th>
            </tr>
          </thead>
          <tbody class="nhsuk-table__body">
            <tr class="nhsuk-table__row">
              <td class="nhsuk-table__cell">Initial elevated reading</td>
              <td class="nhsuk-table__cell">15 Sep 2024</td>
              <td class="nhsuk-table__cell">{{ nhsappBadgeSmall({
                text: "Complete",
                colour: "green"
              }) }}</td>
            </tr>
            <tr class="nhsuk-table__row">
              <td class="nhsuk-table__cell">Repeat measurements</td>
              <td class="nhsuk-table__cell">18 Sep 2024</td>
              <td class="nhsuk-table__cell">{{ nhsappBadgeSmall({
                text: "Complete", 
                colour: "green"
              }) }}</td>
            </tr>
            <tr class="nhsuk-table__row">
              <td class="nhsuk-table__cell">ABPM monitoring</td>
              <td class="nhsuk-table__cell">8 Oct 2024</td>
              <td class="nhsuk-table__cell">{{ nhsappBadgeSmall({
                text: "Complete",
                colour: "green" 
              }) }}</td>
            </tr>
            <tr class="nhsuk-table__row">
              <td class="nhsuk-table__cell">GP confirmation</td>
              <td class="nhsuk-table__cell">Expected: 10 Oct 2024</td>
              <td class="nhsuk-table__cell">{{ nhsappBadgeSmall({
                text: "In progress",
                colour: "yellow"
              }) }}</td>
            </tr>
            <tr class="nhsuk-table__row">
              <td class="nhsuk-table__cell">Treatment planning</td>
              <td class="nhsuk-table__cell">To be scheduled</td>
              <td class="nhsuk-table__cell">{{ nhsappBadgeSmall({
                text: "Pending",
                colour: "grey"
              }) }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h2 class="nhsuk-heading-m">What you can expect</h2>

      <div class="nhsuk-card-group">
        <div class="nhsuk-card-group__item nhsuk-grid-column-one-half">
          <div class="nhsuk-card nhsuk-card--clickable">
            <div class="nhsuk-card__content">
              <h3 class="nhsuk-card__heading nhsuk-heading-s">
                Next 2 days
              </h3>
              <p class="nhsuk-card__description">Dr. Johnson will review your results and contact you to discuss next steps.</p>
            </div>
          </div>
        </div>
        <div class="nhsuk-card-group__item nhsuk-grid-column-one-half">
          <div class="nhsuk-card nhsuk-card--clickable">
            <div class="nhsuk-card__content">
              <h3 class="nhsuk-card__heading nhsuk-heading-s">
                Within 1 week
              </h3>
              <p class="nhsuk-card__description">Treatment consultation appointment to discuss medication options and lifestyle changes.</p>
            </div>
          </div>
        </div>
      </div>

      <h2 class="nhsuk-heading-m">Your care team</h2>

      <div class="nhsuk-summary-list">
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            Lead GP
          </dt>
          <dd class="nhsuk-summary-list__value">
            Dr. Sarah Johnson<br>
            <span class="nhsuk-u-secondary-text-colour">Westfield Medical Centre</span>
          </dd>
        </div>
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            Practice contact
          </dt>
          <dd class="nhsuk-summary-list__value">
            020 8123 4567<br>
            <span class="nhsuk-u-secondary-text-colour">Mon-Fri 8am-6pm</span>
          </dd>
        </div>
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            ABPM provider
          </dt>
          <dd class="nhsuk-summary-list__value">
            Boots Pharmacy (Mill Road)<br>
            <span class="nhsuk-u-secondary-text-colour">ABPM Service Provider</span>
          </dd>
        </div>
      </div>

      <div class="nhsuk-inset-text">
        <span class="nhsuk-u-visually-hidden">Information: </span>
        <h3 class="nhsuk-heading-s">Need to contact us?</h3>
        <p>If you have urgent concerns about your blood pressure, contact your GP surgery immediately or call 111.</p>
        <p>For non-urgent questions about your results, you can message your GP practice through the NHS App.</p>
      </div>

      <div class="nhsuk-action-link">
        <a class="nhsuk-action-link__link" href="/pages/mybp/index">
          <svg class="nhsuk-icon nhsuk-icon__arrow-right-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="36" height="36">
            <path d="m0 0h24v24h-24z" fill="none"/>
            <path d="m12 2a10 10 0 1 0 10 10 10.011 10.011 0 0 0 -10-10zm-2 13.5v-7l6 3.5z"/>
          </svg>
          <span class="nhsuk-action-link__text">Return to My BP dashboard</span>
        </a>
      </div>

    </div>
  </div>
{% endblock %}