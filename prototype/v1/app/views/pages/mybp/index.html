<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the NHS App layout from /app/views/layout-app.html -->
{% extends 'layout-app.html' %}

{% set hub = "Your health" %}
{% set pageHeading = "My BP - Hypertension Management" %}

<!-- For adding a breadcrumb or back link -->
{% block beforeContent %}
{% endblock %}

<!-- For adding page content -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      <!-- DYNAMIC PAGE TITLE -->
      {{ dynamicPageTitle({
        logo: data['web'] !== "yes",
        heading: "My BP - Hypertension Management",
        subtitle: "(Demo - dummy data only)"
      })}}

      <p class="nhsuk-lede-text">
        Manage your blood pressure and medication with AI-supported care from our NHS system.
      </p>

      <!-- EMERGENCY SUPPORT BUTTON -->
      <div class="nhsuk-u-margin-bottom-4">
        <a href="/pages/mybp/emergency" class="nhsuk-button nhsuk-button--secondary" role="button">
          Get Help & Emergency Support
        </a>
        <p class="nhsuk-u-font-size-14 nhsuk-u-margin-top-1">For urgent BP concerns or medication side effects</p>
      </div>

      <!-- SECTION - BP TRENDS -->
      {{ nhsappSectionHeading({
        headingText: "Your BP trends"
      }) }}
      
      <div class="nhsuk-grid-row nhsuk-u-margin-bottom-4">
        <div class="nhsuk-grid-column-full">
          <div style="background: #f0f4f5; padding: 16px; border-radius: 8px; border-left: 4px solid #ffb81c;">
            <h4 class="nhsuk-u-margin-bottom-2">Latest reading: <span class="nhsuk-tag nhsuk-tag--orange">142/88 mmHg</span></h4>
            <p class="nhsuk-u-margin-bottom-2"><strong>Status:</strong> Above target - medication review recommended</p>
            <p class="nhsuk-u-font-size-14 nhsuk-u-margin-bottom-0">Target: &lt;140/90 mmHg | Taken: 3 days ago | Trend: ‚ÜóÔ∏è Slightly increasing</p>
          </div>
        </div>
      </div>

      <!-- SECTION - NEXT ACTIONS -->
      {{ nhsappSectionHeading({
        headingText: "Next actions for you"
      }) }}
      
      <div class="nhsuk-u-margin-bottom-4">
        <div class="nhsuk-notification-banner" role="region" aria-labelledby="next-actions-title">
          <div class="nhsuk-notification-banner__header">
            <h2 class="nhsuk-notification-banner__title" id="next-actions-title">
              Personalised recommendations
            </h2>
          </div>
          <div class="nhsuk-notification-banner__content">
            <ol class="nhsuk-list nhsuk-list--number">
              <li><strong>Take your next BP reading</strong> - Due in 3 days</li>
              <li><strong>Check your latest lab results</strong> - U&E test results are available to view</li>
              <li><strong>Continue taking your medication</strong> - Amlodipine 5mg daily as prescribed</li>
            </ol>
          </div>
        </div>
      </div>

      <!-- SECTION - MEDICATION REMINDERS -->
      {{ nhsappSectionHeading({
        headingText: "Medication reminders"
      }) }}
      
      <div class="nhsuk-u-margin-bottom-4">
        <div style="background: #ffffff; border: 2px solid #00a499; padding: 16px; border-radius: 8px;">
          <h4 class="nhsuk-u-margin-bottom-2">Today's medication: <span class="nhsuk-tag nhsuk-tag--green">Taken ‚úì</span></h4>
          <p class="nhsuk-u-margin-bottom-2"><strong>Amlodipine 5mg</strong> - Taken at 8:00 AM</p>
          <p class="nhsuk-u-font-size-14 nhsuk-u-margin-bottom-2">Next dose: Tomorrow at 8:00 AM</p>
          <p class="nhsuk-u-font-size-14">üí° <strong>Adherence rate:</strong> 94% this month (excellent!)</p>
        </div>
      </div>

      <!-- SECTION - HYPERTENSION MANAGEMENT -->
      {{ nhsappSectionHeading({
        headingText: "Manage your care"
      }) }}

      <p>Your care is coordinated by our AI system following NICE guidelines:</p>

      {{ nhsappCardGroup({
        stacked: true,
        cards: [
          {
            title: "View lab results",
            href: "/pages/mybp/blood-test/results",
            description: "Check your latest U&E blood test results and kidney function monitoring."
          },
          {
            title: "Measure blood pressure",
            href: "/pages/mybp/bp-measurement/index",
            description: "Take your blood pressure using Lifelight technology at a local community location."
          },
          {
            title: "Report a side-effect",
            href: "/pages/mybp/side-effects",
            description: "Report any side effects from your blood pressure medication for safety monitoring."
          },
          {
            title: "Medication information",
            href: "/pages/mybp/medication-info",
            description: "View information about your current blood pressure medication and how it works."
          }
        ]
      }) }}

      <!-- SECTION - RECENT ACTIVITY -->
      {{ nhsappSectionHeading({
        headingText: "Recent activity & progress tracking"
      }) }}
      
      <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-one-half">
          <h4>Clinical updates</h4>
          <ul class="nhsuk-list">
            <li>
              <strong>Last BP reading:</strong> 142/88 mmHg (3 days ago)
            </li>
            <li>
              <strong>Latest lab results:</strong> <span class="nhsuk-tag nhsuk-tag--green">Normal</span> U&E test (28 Oct 2024)
            </li>
            <li>
              <strong>Current medication:</strong> Amlodipine 5mg daily
            </li>
            <li>
              <strong>Next appointment:</strong> 15 October 2024
            </li>
          </ul>
        </div>
        <div class="nhsuk-grid-column-one-half">
          <h4>Lifestyle progress</h4>
          <ul class="nhsuk-list">
            <li>
              <strong>Exercise goal:</strong> <span class="nhsuk-tag nhsuk-tag--green">3/3 sessions</span> this week
            </li>
            <li>
              <strong>Medication adherence:</strong> <span class="nhsuk-tag nhsuk-tag--green">94%</span> this month
            </li>
            <li>
              <strong>Weight tracking:</strong> <span class="nhsuk-tag nhsuk-tag--blue">2kg reduction</span> since start
            </li>
            <li>
              <strong>Sodium reduction:</strong> <span class="nhsuk-tag nhsuk-tag--yellow">In progress</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- SECTION - YOUR CARE PATHWAY -->
      {{ nhsappSectionHeading({
        headingText: "Your care pathway"
      }) }}
      
      <div class="nhsuk-u-margin-bottom-4">
        <div style="background: #e8f4fd; border-left: 4px solid #005eb8; padding: 16px; border-radius: 4px;">
          <h4 class="nhsuk-u-margin-bottom-2">Hypertension Management Programme</h4>
          <p class="nhsuk-u-margin-bottom-2">You are receiving ongoing treatment management for essential hypertension through our AI-coordinated care system.</p>
          <p class="nhsuk-u-font-size-14 nhsuk-u-margin-bottom-0"><strong>Active support:</strong> Medication monitoring, BP tracking, safety blood tests, and lifestyle guidance</p>
        </div>
      </div>

      <!-- SECTION - HEALTHCARE PROFESSIONAL ACCESS -->
      <div class="nhsuk-u-margin-top-6">
        <hr class="nhsuk-section-break nhsuk-section-break--l nhsuk-section-break--visible">
        <p class="nhsuk-u-font-size-14 nhsuk-u-margin-bottom-2">
          <strong>Healthcare professionals:</strong> 
          <a href="/pages/mybp/gp-dashboard">Access GP Practice Analytics Dashboard</a>
        </p>
      </div>

    </div>
  </div>
{% endblock %}
