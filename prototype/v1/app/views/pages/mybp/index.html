<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the NHS App layout from /app/views/layout-app.html -->
{% extends 'layout-app.html' %}

{% set hub = "Your health" %}
{% set pageHeading = "My BP - Hypertension Management" %}

<!-- For adding a breadcrumb or back link -->
{% block beforeContent %}
{% endblock %}

<!-- For adding page content -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      <!-- DYNAMIC PAGE TITLE -->
      {{ dynamicPageTitle({
        logo: data['web'] !== "yes",
        heading: "My BP - Hypertension Management",
        subtitle: "(Demo - dummy data only)"
      })}}

      <p class="nhsuk-lede-text">
        Manage your blood pressure and medication with AI-supported care.
      </p>

      <!-- SECTION - HYPERTENSION MANAGEMENT -->
      {{ nhsappSectionHeading({
        headingText: "Your care plan today"
      }) }}

      <p>Your care system has arranged your care based on clinical guidelines and your recent readings:</p>

      <!-- RED FLAG ALERT - Only shown when high BP detected -->
      <div class="nhsuk-error-summary" aria-labelledby="error-summary-title" role="alert" style="border-left-color: #d5281b; margin-bottom: 32px;">
        <h2 class="nhsuk-error-summary__title" id="error-summary-title">
          ðŸš¨ Hypertensive Emergency
        </h2>
        <div class="nhsuk-error-summary__body">
          <p>Your blood pressure reading of <strong>195/115 mmHg</strong> with symptoms indicates a medical emergency requiring immediate hospital treatment.</p>
          <p>
            <a href="/pages/mybp/red-flag-emergency/symptom-confirmation" class="nhsuk-button nhsuk-button--warning">
              Follow emergency protocol now
            </a>
          </p>
        </div>
      </div>

      <!-- AUTOMATICALLY SCHEDULED CARE -->
      <div class="nhsuk-inset-text">
        <span class="nhsuk-u-visually-hidden">Information: </span>
        <p><strong>Care arranged automatically:</strong> Based on your clinical data, your care system has determined you need a medication dose review due to consistently elevated readings above target (140/90 mmHg).</p>
      </div>

      {{ nhsappCardGroup({
        stacked: true,
        cards: [
          {
            title: "ðŸ“‹ Medication dose review required",
            href: "/pages/mybp/dose-titration/index",
            description: "Your care system has scheduled a medication review based on your recent readings being above target. This follows clinical protocols automatically.",
            label: "Automatically scheduled"
          }
        ]
      }) }}

      <!-- PATIENT-INITIATED ACTIONS -->
      {{ nhsappSectionHeading({
        headingText: "Additional actions you can take"
      }) }}

      <p>While your care system manages your clinical care, you can submit additional readings when you want:</p>

      {{ nhsappCardGroup({
        stacked: true,
        cards: [
          {
            title: "ðŸ“± Submit extra BP reading",
            href: "/pages/mybp/bp-measurement/index",
            description: "Take an additional blood pressure reading using Lifelight technology. Your care system will review and incorporate this into your care plan.",
            label: "Optional - patient choice"
          }
        ]
      }) }}

      <!-- SECTION - RECENT ACTIVITY -->
      {{ nhsappSectionHeading({
        headingText: "Recent activity"
      }) }}
      
      <ul class="nhsuk-list">
        <li>
          <strong>Last BP reading:</strong> 142/88 mmHg (3 days ago)
        </li>
        <li>
          <strong>Current medication:</strong> Amlodipine 5mg daily
        </li>
        <li>
          <strong>Next appointment:</strong> 15 October 2024
        </li>
      </ul>

    </div>
  </div>
{% endblock %}
